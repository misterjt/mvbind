Backbone.View.prototype.mvbind=function(e){e=e||{},_.defaults(e,{source:"model"});var c,t,i,a,r=this.bind,n=this.model;for(var o in r)c=$(o,this.$el),t=c.prop("type"),i=c.attr("name")||"",a="[]"==i.substr(i.length-2),function(c,t,i,a,r){if(-1!=["text","number","textarea","date","radio","checkbox","hidden","select-one"].indexOf(t)){var n="";n=-1!=["radio","checkbox","select-one"].indexOf(t)?"change":"input",c.bind(n,function(){var e;switch(t){case"radio":e=c.filter(":checked").val();break;case"checkbox":r?(e=[],c.filter(":checked").each(function(){e.push($(this).val())})):e=c.prop("checked");break;default:r?(e=[],c.each(function(){e.push($(this).val())})):e=c.val()}a.set(i,e,{mvbind:!0})})}a.on("change:"+i,function(e,i,a){if(1!=a.mvbind)switch(t){case"radio":c.filter("[value="+i+"]").prop("checked",!0);break;case"checkbox":if(c.filter(":checked").prop("checked",!1),r)for(var n in i)c.filter("[value="+i[n]+"]").prop("checked",!0);else c.prop("checked",!!i);break;default:"undefined"==typeof t?c.html(i):c.val(i)}}),"model"==e.source?a.trigger("change:"+i,a,a.get(i),{}):c.trigger("change")}(c,t,r[o],n,a)};
