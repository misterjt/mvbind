Backbone.View.prototype.mvbind=function(e){e=e||{};_.defaults(e,{source:"model"});var t=this.bind,n=this.model,r,i,s,o;for(var u in t){r=$(u,this.$el);i=r.prop("type");s=r.attr("name")||"";o=s.substr(s.length-2)=="[]";(function(t,n,r,i,s){if(["text","number","textarea","date","radio","checkbox","hidden","select-one"].indexOf(n)!=-1){var o="";if(["radio","checkbox","select-one"].indexOf(n)!=-1)o="change";else o="input";t.bind(o,function(){var e;switch(n){case"radio":e=t.filter(":checked").val();break;case"checkbox":if(s){e=[];t.filter(":checked").each(function(){e.push($(this).val())})}else e=t.prop("checked");break;default:if(s){e=[];t.each(function(){e.push($(this).val())})}else e=t.val()}i.set(r,e,{mvbind:true})})}i.on("change:"+r,function(e,r,i){if(i.mvbind==true)return;switch(n){case"radio":t.filter("[value="+r+"]").prop("checked",true);break;case"checkbox":t.filter(":checked").prop("checked",false);if(s){for(var o in r){t.filter("[value="+r[o]+"]").prop("checked",true)}}else t.prop("checked",!!r);break;default:typeof n=="undefined"?t.html(r):t.val(r)}});if(e.source=="model")i.trigger("change:"+r,i,i.get(r),{});else t.trigger("change")})(r,i,t[u],n,o)}}
